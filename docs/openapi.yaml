{"openapi":"3.0.1","info":{"title":"Bank Cards API","description":"API для управления банковскими картами","contact":{"name":"Dmitry Tiabutov","email":"d.tyabutov@yandex.ru"},"license":{"name":"Apache 2.0","url":"http://springdoc.org"},"version":"v1.0.0"},"externalDocs":{"description":"Документация проекта","url":"https://github.com/DimTiabu/Bank_REST"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Users","description":"Управление пользователями"},{"name":"Cards","description":"Управление банковскими картами"},{"name":"Authentication","description":"JWT аутентификация пользователей"}],"paths":{"/api/users/{id}":{"get":{"tags":["Users"],"summary":"Получить пользователя по ID","operationId":"getUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Пользователь найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}},"put":{"tags":["Users"],"summary":"Обновить пользователя по ID","operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Пользователь обновлён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}},"delete":{"tags":["Users"],"summary":"Удалить пользователя по ID","operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"204":{"description":"Пользователь удалён"}}}},"/api/cards/{cardId}/request-block":{"put":{"tags":["Cards"],"summary":"Запрос на блокировку карты (пользовательский)","operationId":"requestCardBlock","parameters":[{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Запрос на блокировку отправлен"}}}},"/api/cards/{cardId}/block":{"put":{"tags":["Cards"],"summary":"Заблокировать карту","operationId":"blockCard","parameters":[{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Карта заблокирована","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}}}}},"/api/cards/{cardId}/activate":{"put":{"tags":["Cards"],"summary":"Активировать карту","operationId":"activateCard","parameters":[{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Карта активирована","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}}}}},"/api/users":{"get":{"tags":["Users"],"summary":"Получить всех пользователей","operationId":"getAllUsers","responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Список пользователей","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}},"post":{"tags":["Users"],"summary":"Создать пользователя","operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Пользователь создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/cards":{"get":{"tags":["Cards"],"summary":"Получить все карты с фильтрацией и пагинацией","operationId":"getAllCards","parameters":[{"name":"pageNumber","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}},{"name":"cardFilter","in":"query","required":true,"schema":{"$ref":"#/components/schemas/CardFilter"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Список карт","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page"}}}}}},"post":{"tags":["Cards"],"summary":"Создание карты","operationId":"createCard","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Карта создана","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}}}}},"/api/cards/transfer":{"post":{"tags":["Cards"],"summary":"Перевод между своими картами","operationId":"transferBetweenMyCards","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransferRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Перевод выполнен"}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"Аутентификация пользователя","description":"Проверяет учетные данные и возвращает JWT токен при успешной аутентификации","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешная аутентификация","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"401":{"description":"Неверный логин или пароль"}}}},"/api/cards/{id}":{"get":{"tags":["Cards"],"summary":"Получить карту по ID","operationId":"getCardById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Карта найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}}}},"delete":{"tags":["Cards"],"summary":"Удалить карту по ID","operationId":"deleteCard","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"204":{"description":"Карта удалена"}}}},"/api/cards/user/{userId}":{"get":{"tags":["Cards"],"summary":"Получить все карты пользователя","operationId":"getAllMyCards","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"cardFilter","in":"query","required":true,"schema":{"$ref":"#/components/schemas/CardFilter"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Список карт пользователя","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page"}}}}}}},"/api/cards/balance/{cardId}":{"get":{"tags":["Cards"],"summary":"Получить баланс своей карты","operationId":"getMyCardBalance","parameters":[{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Баланс возвращён","content":{"application/json":{"schema":{"type":"number"}}}}}}}},"components":{"schemas":{"ErrorResponse":{"type":"object","properties":{"statusCode":{"type":"integer","description":"HTTP статус ошибки","format":"int32","example":404},"errorMessage":{"type":"string","description":"Сообщение об ошибке","example":"Пользователь не найден"}},"description":"Ответ об ошибке"},"UserRequest":{"required":["email","firstName","lastName","password","phoneNumber"],"type":"object","properties":{"firstName":{"type":"string","description":"Имя пользователя","example":"Иван"},"lastName":{"type":"string","description":"Фамилия пользователя","example":"Иванов"},"email":{"type":"string","description":"Электронная почта пользователя","example":"ivanov@example.com"},"phoneNumber":{"pattern":"^(89\\d{9})$","type":"string","description":"Номер телефона в формате 89*********","example":"89161234567"},"password":{"type":"string","description":"Пароль пользователя","example":"P@ssw0rd123"},"createdAt":{"type":"string","description":"Дата и время создания пользователя","format":"date-time"},"role":{"type":"string","description":"Роль пользователя","example":"ROLE_USER","enum":["ROLE_USER","ROLE_ADMIN"]}},"description":"Запрос на создание или обновление пользователя"},"UserResponse":{"type":"object","properties":{"id":{"type":"string","description":"Уникальный идентификатор пользователя","format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000"},"firstName":{"type":"string","description":"Имя пользователя","example":"Иван"},"lastName":{"type":"string","description":"Фамилия пользователя","example":"Иванов"},"email":{"type":"string","description":"Электронная почта пользователя","example":"ivanov@example.com"},"phoneNumber":{"type":"string","description":"Номер телефона пользователя","example":"89161234567"},"role":{"type":"string","description":"Роль пользователя","example":"ROLE_USER","enum":["ROLE_USER","ROLE_ADMIN"]}},"description":"Ответ с данными пользователя"},"CardResponse":{"type":"object","properties":{"id":{"type":"string","description":"Уникальный идентификатор карты","format":"uuid","example":"d290f1ee-6c54-4b01-90e6-d701748f0851"},"number":{"type":"string","description":"Номер карты в формате маскированного отображения","example":"**** **** **** 1234"},"expirationDate":{"type":"string","description":"Срок действия карты","format":"date","example":"2026-12-31"},"status":{"type":"string","description":"Статус карты","example":"ACTIVE","enum":["ACTIVE","BLOCKED","EXPIRED"]},"balance":{"type":"number","description":"Текущий баланс карты","example":1500.0}},"description":"Ответ с информацией о карте"},"CardRequest":{"required":["balance","userId"],"type":"object","properties":{"userId":{"type":"string","description":"ID пользователя, которому принадлежит карта","format":"uuid","example":"3fa85f64-5717-4562-b3fc-2c963f66afa6"},"balance":{"type":"number","description":"Начальный баланс карты","example":5000.0}},"description":"Запрос на создание новой карты"},"TransferRequest":{"required":["amount","fromCardId","toCardId"],"type":"object","properties":{"fromCardId":{"type":"string","description":"ID карты отправителя","format":"uuid","example":"111e4567-e89b-12d3-a456-426614174000"},"toCardId":{"type":"string","description":"ID карты получателя","format":"uuid","example":"222e4567-e89b-12d3-a456-426614174001"},"amount":{"type":"number","description":"Сумма перевода","example":500.0}},"description":"Запрос на перевод между картами"},"AuthRequest":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string","description":"Email пользователя","example":"user@example.com"},"password":{"type":"string","description":"Пароль пользователя","example":"strongPassword123"}},"description":"Запрос для аутентификации пользователя"},"AuthResponse":{"type":"object","properties":{"token":{"type":"string","description":"JWT токен для аутентификации","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"description":"Ответ после успешной аутентификации с JWT токеном"},"CardFilter":{"type":"object","properties":{"pageSize":{"type":"integer","description":"Размер страницы","format":"int32","example":5},"pageNumber":{"type":"integer","description":"Номер страницы (нумерация с 0)","format":"int32","example":0},"id":{"type":"string","description":"ID карты","format":"uuid","example":"3fa85f64-5717-4562-b3fc-2c963f66afa6"},"encryptedNumber":{"type":"string","description":"Зашифрованный номер карты","example":"**** **** **** 1234"},"userId":{"type":"string","description":"ID владельца карты","format":"uuid","example":"d2f0e6bc-1c2f-4b10-9d6b-313d23456789"},"expirationDateFrom":{"type":"string","description":"Дата окончания действия карты - от","format":"date","example":"2025-01-01"},"expirationDateTo":{"type":"string","description":"Дата окончания действия карты - до","format":"date","example":"2025-12-31"},"status":{"type":"string","description":"Статус карты","example":"ACTIVE","enum":["ACTIVE","BLOCKED","EXPIRED"]},"balanceFrom":{"type":"number","description":"Минимальный баланс карты","example":1000.0},"balanceTo":{"type":"number","description":"Максимальный баланс карты","example":10000.0}},"description":"Фильтр для поиска карт по различным критериям"},"Page":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"type":"object"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"unpaged":{"type":"boolean"}}},"SortObject":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}}}}}